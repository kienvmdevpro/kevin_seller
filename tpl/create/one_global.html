<div class="clearfix" xmlns="http://www.w3.org/1999/html">&nbsp;</div>
<style>
    .nav.nav-tabs .thembtn a {
        cursor: pointer!important;
        color: #428bca!important;
    }
/*@media (min-width: 767px) {*/
    .add-shopify{
        position: absolute;
        right: 10px;
        top: 1px;
    }
    .add-lazada{
        position: absolute;
        right: 178px;
        top: 1px;
    }
    .order-service  .ui-select-choices-row > a{
            padding: 10px 10px 10px 10px;
    }
     .order-service .divider {
         margin: 0;
     }
      .order-service .dropdown-header,.order-service .dropdown-menu>li>a {
          padding: 2px 15px;
      }
      .order-select-country .ui-select-bootstrap .ui-select-toggle>.caret {
        right: 3px !important;
      }
      .order-select-country .ui-select-choices{
          width: 216px;
      }
      .order-select-country {
          max-width: 40px;
      }
      .order-autocomplete-phone  .dropdown-menu{
        left: 0px !important;
      }
      .sdt {
          padding-left: 40px;
      }
      .opencontry {
            position: absolute;
            z-index: 999;
            top: 4px;
      }
      .opencontry .select-opencontry {
              max-height: 300px;
              overflow-y: scroll;
      }
    div.hvc-select .ui-select-bootstrap .ui-select-choices-row .hvc_description > span {
        white-space: normal;
    }

    div.hvc-select .ui-select-bootstrap .ui-select-match > span.btn {
    white-space: normal;
    /* height: auto; */
    }
    .hvc_show{
        display: inline !important;
    }
/*  */
</style>
<div class="col-lg-12" ng-controller="OrderCreateParentCtrl">

    <div class="row">
        <div class="col-lg-12">
            <h3 class="font-thin pull-left m-t-none m-r-md">{{'OBG_TaoDonChuyenPhatQuocTe' | translate}}<!-- Tạo đơn chuyển phát quốc tế --></h3>
            <div class="clearfix"></div>
        </div>
    </div>
   
    <div class="row">
        <div class="col-lg-12 col-md-12" ng-if="notice.content.length > 0">
            <div ng-if="keyLang=='en'" class="alert alert-warning" role="alert" ng-bind-html="notice.content_en"></div>
            <div ng-if="keyLang!='en'" class="alert alert-warning" role="alert" ng-bind-html="notice.content"></div>
        </div>
    </div>
    <div class="row" style="margin-bottom:70px">
        <div class="col-lg-12 col-md-12">
            <tabset justified="false">
                
                <tab heading="{{'OBG_TaoDon' | translate}} {{To.Buyer.Name.length > 0 ? ': ' + To.Buyer.Name : item}}" ng-repeat="item in tabs track by $index"
                    active="$last">
                    <form class="form-validation form-horizontal"   ng-controller="OrderCreateV2GlobalCtrl" role="form" name="frmOrderCreate_{{$index}}">
                        <div class="row bg-white">
                            <!--- Add shopify order -->
                            <div class="add-shopify">
                                <div class="btn-group m-b-sm pull-right">
                                    <div class="btn-group dropdown" dropdown>
                                        <button data-toggle="dropdown" style="color: #fff" dropdown-toggle class="btn bg-success dropdown-toggle" type="button" aria-haspopup="true" aria-expanded="false">
                                            Import from store 
                                            <span class="caret"></span>
                                        </button>
                                        <ul class="dropdown-menu">
                                            <li ng-if="userInfo.store_connect.shopify"><a ng-click="add_store_connect_order(1)"><img style="width: 20px;" src="img/logo-doitac/shopify.png"> Shopify shop</a></li>
                                            <li ng-if="userInfo.store_connect.magento"><a ng-click="add_store_connect_order(2)"><img  style="width: 20px;" src="img/logo-doitac/magento.png"> Magento shop</a></li>
                                            <li ng-if="userInfo.store_connect.lazada"><a ng-click="add_store_connect_order(3)"><img  style="width: 20px;" src="img/logo-doitac/lazada.png"> Lazada shop</a></li>
                                            <li ng-if="userInfo.store_connect.woocommerce"><a ng-click="add_store_connect_order(4)"><img  style="width: 20px;" src="img/logo-doitac/woocommerce.png"> Woocommerce</a></li>
                                            <li ng-if="userInfo.store_connect.etsy"><a ng-click="add_store_connect_order(5)"><img  style="width: 20px;" src="img/logo-doitac/etsy.png"> Etsy</a></li>
                                            <li ng-if="userInfo.store_connect.ebay"><a ng-click="add_store_connect_order(6)"><img  style="width: 20px;" src="img/logo-doitac/ebay1.png"> Ebay</a></li>
                                            <li ng-if="userInfo.store_connect.haravan"><a ng-click="add_store_connect_order(7)"><img  style="width: 20px;" src="img/logo-doitac/haravan.png"> Haravan</a></li>
                                            <li ng-if="userInfo.store_connect.robins"><a ng-click="add_store_connect_order(8)"><img  style="width: 20px;" src="img/logo-doitac/robins.png"> Robins</a></li>
                                        </ul>
                                    </div> 
                                </div>
                                <script type="text/ng-template" id="add_store_connect_template.html">
                                        <div data-ng-include=" 'tpl/create/popup/add_store_connect_template.html' "></div>
                                </script>  
                                <script type="text/ng-template" id="add_lazada_template.html">
                                        <div data-ng-include=" 'tpl/create/popup/add_lazada_template.html?v=1.1' "></div>
                                </script> 
                            </div>
                             <!--- end Add shopify order -->
                           
                            <div class="col-md-8 col-lg-8">
                                <div class="row">
                                    <div class="col-md-6">
                                        <p class="m-t-md m-b-md"><strong> 1. {{'OBG_1ThongTinNguoiNhan' | translate}}</strong></p>
                                        <div id="buyer-info">
                                            <div class="form-group">
                                                <label for="buyer_phone" name="buyer_phone" class="col-lg-3 col-md-4 control-label text-left">{{'OBG_SoDienThoai' | translate}}<!-- Số điện thoại --></label>
                                                
                                                <div class="col-lg-9 col-md-8">
                                                    <div ng-include="'tpl/create/partials/input_phone.html?v=1.1'" ></div>
                                                </div>
                                                
                                            </div>

                                            <style>
                                                .wrapper_buyer_suggestion .dropdown-menu{
                                                    width: 100%;
                                                }
                                                .input-group-btn .ui-select-match {
                                                        display: block !important;
                                                }
                                                .input-group-btn  .ui-select-search {
                                                     display: none !important;
                                                }
                                                .input-group-btn .sdt {
                                                        position: absolute;
                                                        max-width: 66%
                                                }
                                            </style>


                                            <div class="form-group" ng-if="show_phone2">
                                                <label for="buyer_name" class="col-lg-3 col-md-4 control-label text-left">&nbsp;</label>
                                                <div class="col-lg-9 col-md-8">
                                                    <input type="text" ng-model="To.Buyer.Phone2" name="buyer_phone2" minlength="9" maxlength="14" class="form-control" placeholder="{{ 'OBG_SDTPhucuaNguoiNhan' | translate}}"
                                                        autofocus>
                                                    <small class="label label-warning" ng-if="phone2IsWrong">
                                                     {{'OBG_HinhNhuBanNhapSaoSDT' | translate}}</small>
                                                </div>
                                            </div>

                                           
                                            <div class="form-group">
                                                <label for="buyer_name" class="col-lg-3 col-md-4 control-label text-left">{{'OBG_HoTen' | translate}}<!-- Họ tên --></label>
                                                <div class="col-lg-9 col-md-8">
                                                    <input type="text" ng-model="To.Buyer.Name" name="buyer_name" class="form-control" id="buyer_name" placeholder="{{'OBG_HoTen' | translate}}" required>
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <label for="buyer_address" class="col-lg-3 col-md-4 control-label text-left">{{'OBG_DiaChi' | translate}}<!-- Địa chỉ --></label>
                                                <div class="col-lg-9 col-md-8">
                                                    <input   ng-show="To.Buyer.Country.id != 237" id="addressgg1" tabindex="3" class="form-control" ng-model="To.Buyer.Address" name="buyer_address" details="autocomplete_details" required google-autocomplete-country
                                                            country="To.Buyer.Country.country_code" required placeholder="{{'OBG_NhapDiaChiDuongNgo' | translate}}" />   

                                                    <input  id="addressgg"  ng-show="To.Buyer.Country.id == 237" class="form-control" ng-model="To.Buyer.Address" name="buyer_address" details="autocomplete_details" required google-autocomplete
                                                        required placeholder="{{'OBG_NhapDiaChiDuongNgo' | translate}}" />
                                                </div>
                                            </div>



                                            <div class="form-group">
                                                <label for="country" class="col-lg-3 col-md-4 control-label text-left">{{'OBG_QuocGia' | translate}}<!-- Quốc gia --></label>
                                                <div class="col-lg-6 col-md-5">
                                                    <ui-select ng-model="To.Buyer.Country" name="country" ng-disabled="disabled" required>
                                                        <ui-select-match placeholder="{{'OBG_QuocGia' | translate}}">{{$select.selected.country_name }}</ui-select-match>
                                                        <ui-select-choices repeat="value in list_country | filter: $select.search |limitTo: 30 track by $index">
                                                            {{value.country_name}}
                                                        </ui-select-choices>
                                                    </ui-select>
                                                </div>
                                                <div class="col-md-3 col-lg-3" style="padding-left:0px">
                                                    <input class="form-control" ng-model="To.Buyer.Zipcode" name="buyer_address" details="autocomplete_details" placeholder="ZipCode" 
                                                    />
                                                </div>
                                            </div>


                                            <div class="form-group" ng-if="To.Buyer.Country.id != 237">
                                                <label for="country" class="col-lg-3 col-md-4 control-label text-left">{{'OBG_TinhThanh' | translate}}<!-- Tỉnh thàn -->h</label>
                                                <div class="col-lg-9 col-md-8">
                                                    <ui-select ng-model="To.Buyer.CityGlobal" name="country" ng-disabled="disabled" required>
                                                        <ui-select-match placeholder="{{'OBG_TinhThanh' | translate }}">{{$select.selected.city_name}}</ui-select-match>
                                                        <ui-select-choices refresh-delay="300" refresh="loadCityGlobal(To.Buyer.Country.id, $select.search)" repeat="value in list_city_global | filter: $select.search | limitTo: 20 track by $index">
                                                            {{value.city_name}}  <span ng-if="value.zipcode">({{value.zipcode}})</span>
                                                        </ui-select-choices>
                                                    </ui-select>
                                                </div>
                                            </div>




                                            <div class="form-group   " ng-if="To.Buyer.Country.id == 237">
                                                <label for="buyer_name" class="col-lg-3 col-md-4 control-label text-left">{{'OBG_KhuVuc' | translate}}<!-- Khu vực --></label>
                                                <div class="col-lg-9 col-md-8   ">
                                                    <district-from-google-place     ng-model="To.Buyer.Area" name="buyer_area" default-district="To.Buyer.Area.district_id" details="autocomplete_details"></district-from-google-place required>
                                                </div>
                                            </div>


                                            <div class="form-group" ng-if="list_ward_by_district.length > 0" ng-if="To.Buyer.Country.id == 237">
                                                <label for="inventory_area" class="col-lg-3 col-md-4 control-label text-left">{{'OBG_PhuongXa' | translate}}<!-- Phường/xã --></label>
                                                <div class="col-lg-9 col-md-8">

                                                    <select ng-model="To.Buyer.ward_id" class="form-control" name="buyer_ward" required>
                                                        <option value="">{{'OBG_ChonPhuongXa' | translate}}<!-- Chọn Phường/xã --></option>
                                                        <option value="{{item.id}}" ng-repeat="item in list_ward_by_district">{{item.ward_name}}</option>
                                                    </select>
                                                </div>
                                            </div>

                                            <div class="form-group" ng-if="To.Buyer.Country.id != 237 ">
                                                <label for="inventory_area" class="col-lg-3 col-md-4 control-label text-left">&nbsp;</label>
                                                <div class="col-lg-9 col-md-8">
                                                <label class="checkbox i-checks ">
                                                        <input type="checkbox" ng-model="To.Buyer.POBox" class="ng-valid ng-dirty ng-valid-parse ng-touched" tabindex="0" aria-checked="true" aria-invalid="false"><i></i>
                                                        PO Box
                                                    </label>
                                                </div>
                                            </div>

                                        </div>

                                        <p class="m-t-md m-b-md"><strong>2. {{'OBG_LayHangGuiTai' | translate}}<!-- 2. Lấy hàng gửi tạ --></strong></p>

                                        <div id="inventory_info">
                                            <div class="form-group">
                                                <label for="inventory" class="col-lg-3 col-md-4 control-label text-left">{{'OBG_ChonKhoHang' | translate}}<!-- Chọn kho hàng --></label>
                                                <div class="col-lg-9 col-md-8">
                                                    <div class="input-group">

                                                        <ui-select ng-model="From.Inventory" name="inventory" ng-disabled="disabled" required>
                                                            <ui-select-match placeholder="Kho hàng">{{$select.selected.name }}</ui-select-match>
                                                            <ui-select-choices group-by="'inventory'" repeat="value in list_inventory | filter: $select.search track by $index">

                                                                <span>{{value.name + ' - ' + value.phone}} <small ng-if="value.distance" class="text-info pull-right">{{'OBG_CachDay' | translate}}<!-- cách đây : --> {{value.distance}}</small><br/>
                                                                 <span>{{value.full_address}} </span></span>
                                                            </ui-select-choices>
                                                        </ui-select>

                                                        <span class="input-group-btn">
                                                        <button class="btn btn-default" type="button" ng-click="addInventory()"><i class="fa fa-plus"></i></button>
                                                    </span>
                                                    </div>
                                                    <!-- /input-group -->

                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label for="inventory_phone" class="col-lg-3 col-md-4 control-label text-left">{{'OBG_SoDienThoai' | translate}}<!-- Số điện thoại --></label>
                                                <div class="col-lg-9 col-md-8">
                                                    <input type="text" ng-model="From.Inventory.phone" class="form-control" name="inventory_phone_abx" id="inventory_phone" placeholder="0912328925"
                                                        ng-disabled="From.Inventory.id && From.Inventory.id > 0" ng-if="From.Inventory.id && From.Inventory.id > 0"
                                                        required>

                                                    <tags-input name="inventory_phone" id="inventory_phone" on-tag-added="addingPhone(From.Inventory.phone)" on-tag-removed="addingPhone(From.Inventory.phone)"
                                                        min-length="9" max-length="14" max-tags="2" ng-if="!From.Inventory.id"
                                                        ng-model="From.Inventory.phone" placeholder="{{'OBG_SDTNguoiGiaoHang' | translate}}"
                                                        required>
                                                    </tags-input>
                                                    <small class="label label-warning" ng-if="phoneIsWrong" ng-if="!From.Inventory.id">{{'OBG_HinhNhuBanNhapSaiSDT' | translate}}<!-- Hình như bạn nhập sai số điện thoại, vui lòng kiểm tra lại ?. --></small>

                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <label for="inventory_username" class="col-lg-3 col-md-4 control-label text-left">{{'OBG_HoTen' | translate}}<!-- Họ tên --></label>
                                                <div class="col-lg-9 col-md-8">
                                                    <input type="text" ng-model="From.Inventory.user_name" class="form-control" id="inventory_username" placeholder="Nguyễn Văn A"
                                                        ng-disabled="From.Inventory.id && From.Inventory.id > 0" required name="inventory_username">
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <label for="inventory_address" class="col-lg-3 col-md-4 control-label text-left">{{'OBG_DiaChi' | translate}}<!-- Địa chỉ --></label>
                                                <div class="col-lg-9 col-md-8">
                                                    <input type="text" ng-model="From.Inventory.address" class="form-control" id="inventory_address" placeholder="{{'OBG_VDDiaChi' | translate}}"
                                                        ng-disabled="From.Inventory.id && From.Inventory.id > 0" google-autocomplete
                                                        details="inventory_add_details" ng-required="true" required>
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <label for="inventory_area" class="col-lg-3 col-md-4 control-label text-left">{{'OBG_KhuVuc' | translate}}<!-- Khu vực --></label>
                                                <div class="col-lg-9 col-md-8">


                                                    <input type="text" name="inventory_ward_name" class="form-control" value="{{From.Inventory.ward.ward_name}}, {{From.Inventory.province.district_name}}, {{From.Inventory.city.city_name}}"
                                                        ng-if="From.Inventory.id && From.Inventory.id > 0" ng-disabled="From.Inventory.id && From.Inventory.id > 0"
                                                        required>

                                                    <district-from-google-place ng-model="From.Inventory.Area" ng-if="!From.Inventory.id" details="inventory_add_details"></district-from-google-place required>
                                                </div>
                                            </div>

                                            <div class="form-group" ng-if="From.Inventory.Area.district_id > 0">
                                                <label for="inventory_area" class="col-lg-3 col-md-4 control-label text-left">{{'OBG_PhuongXa' | translate}}<!-- Phường/xã --></label>
                                                <div class="col-lg-9 col-md-8">

                                                    <select ng-model="From.Inventory.ward_id" class="form-control" required>
                                                        <option value="">{{'OBG_ChonPhuongXa' | translate}}<!-- Chọn Phường/xã --></option>
                                                        <option value="{{item.id}}" ng-repeat="item in list_ward">{{item.ward_name}}</option>
                                                    </select>
                                                </div>
                                            </div>

                                            <div class="form-group" ng-if="!From.Inventory.id">
                                                <label for="inventory_area" class="col-lg-3 col-md-4 control-label text-left">&nbsp;</label>
                                                <div class="col-lg-9 col-md-8">
                                                    <button class="btn btn-primary" type="button" ng-click="saveInventory(From.Inventory)" ng-disabled="!From.Inventory.ward_id || !From.Inventory.phone || !From.Inventory.user_name || !From.Inventory.Area.city_id || saveInventoryLoading">{{'OBG_LuuThongTinKho' | translate}}<!-- Lưu thông tin kho --></button>

                                                    <button class="btn btn-default" type="button" ng-click="cancelAddInventory()">{{'OBG_Huy' | translate}}<!-- Hủy --></button>
                                                </div>
                                            </div>


                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <p class="m-t-md m-b-md"><strong>{{'OBG_3HangHoa' | translate}}<!-- 3. Hàng hóa --></strong></p>
                                        <div class="product-info">
                                            <div class="form-group">
                                                <label for="product_name" class="col-lg-3 col-md-4 control-label text-left">{{'OBG_TenHang' | translate}}<!-- Tên hàng --></label>
                                                <div class="col-lg-9 col-md-8" tooltip="{{'OBG_BanNenNhapTenSpRoRang' | translate}}">
                                                    <item-autocomplete name-product"SetNameProduct" code="Product.Id" price-model="Product.Price" weight-model="Product.Weight" name-model="Product.Name"
                                                        required></item-autocomplete>
                                                        
                                                    <!-- <input type="text" ng-model="Product.Name" class="form-control" id="product_name" placeholder="Ví dụ: Tên sản phẩm" required > -->
                                                </div>
                                            </div>


                                            <div class="form-group">
                                                <label for="product_quantity" class="col-lg-3 col-md-4 control-label text-left">{{'OBG_SoLuong' | translate}}<!-- Số lượng --></label>
                                                <div class="col-lg-9 col-md-8">
                                                    <input type="text" ng-model="Product.Quantity" formatnumber class="form-control" id="product_quantity" placeholder="{{'OBG_SoLuongSanPham' | translate}}"
                                                        required ng-maxlength="3">
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <label for="product_amount" class="col-lg-3 col-md-4 control-label text-left">{{'OBG_TriGiaHang' | translate}}<!-- Trị giá hàng --></label>
                                                <div class="col-lg-9 col-md-8">
                                                    <input type="text" ng-model="Product.Price" ng-if="ViewHomeCurrency ==viewCurrency" formatnumber class="form-control" id="product_amount" 
                                                    placeholder="{{'OBG_NhapTriGiaHang' | translate}} ({{viewCurrency}})" required ng-minlength="5">
                                                     <input type="text" ng-model="Product.Price_curernt_2" ng-if="ViewHomeCurrency !=viewCurrency"  ng-change="Product.Price=convert_currency_to_home_currency(Product.Price_curernt_2)"  class="form-control" id="product_amount" 
                                                     placeholder="{{'OBG_NhapTriGiaHang' | translate}} ({{viewCurrency}})" required ng-minlength="1">
                                                	<span  style="float:right" ng-if="ViewHomeCurrency !=viewCurrency">
										              {{Product.Price || '0' | number:0}}{{ViewHomeCurrency}}
										            </span>
                                                </div>
                                                
                                            </div>

                                            <div class="form-group" style="margin-bottom:6px;">
                                                <label for="product_weight" class="col-lg-3 col-md-4 control-label text-left">{{'OBG_KhoiLuong' | translate}}<!-- Khối lượng --></label>
                                                <div class="col-lg-9 col-md-8">
                                                    <input type="text" ng-model="Product.Weight" formatnumber class="form-control" id="product_weight" placeholder="{{'OBG_NhapKhoiLuongTheoGram' | translate}}"
                                                        required tooltip="{{'OBG_TrongTHNhapSaiKhoiLuong' | translate}}"
                                                        tooltip-trigger="focus">
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <label for="product" class="col-lg-3 col-md-4 control-label text-left">&nbsp;</label>
                                                <div class="col-lg-9 col-md-8">
                                                    <div class="checkbox">
                                                        <label class="i-checks padder-md padder-xs">
                                                            <input type="checkbox"
                                                                   ng-model="box_size_check" /><i></i>
                                                            <!-- Nhập thêm thể tích kiện hàng -->
                                                            {{'OBG_NhapThemTheTich' | translate}}
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="form-group" ng-show="box_size_check">
                                                <label ng-show="keyLang!='en'" for="product_boxsize" class="col-lg-3 col-md-4 control-label text-left">{{'OBG_TheTich' | translate}}<!-- Thể tích  -->
                                                	<i class="icon-question"  aria-hidden="true" id="boxsize-popover"></i>
                                                </label>
                                                <label ng-show="keyLang=='en'" for="product_boxsize" class="col-lg-3 col-md-4 control-label text-left">{{'OBG_TheTich' | translate}}<!-- Thể tích  -->
                                                <i class="icon-question"  aria-hidden="true" id="boxsize-popover1"></i>
                                                </label>
                                                <div class="col-lg-9 col-md-8">
                                                    <div class="row">
                                                        <div class="col-md-4">
                                                            <input type="text" name="box_size_l" ng-model="Product.BoxSize.L" class="form-control" placeholder="{{'OBG_Dai' | translate}}">
                                                        </div>

                                                        <div class="col-md-4">
                                                            <input type="text" name="box_size_w" ng-model="Product.BoxSize.W" class="form-control" placeholder="{{'OBG_Rong' | translate}}">
                                                        </div>

                                                        <div class="col-md-4">
                                                            <input type="text" name="box_size_h" ng-model="Product.BoxSize.H" class="form-control" placeholder="{{'OBG_Cao' | translate}}">
                                                        </div>

                                                    </div>

                                                </div>

                                                <script>
                                                    $(document).ready(function (){
                                                        $('#boxsize-popover').popover({
                                                            html: true,
                                                            content: 'Bạn nên nhập thể tích hàng hoá sau đóng gói để tính phí vận chuyển chính xác hơn. <br/>- Phí vận chuyển sẽ được tính dựa trên giá khối lượng hàng hoá hoặc khối lượng quy đổi (<strong>dài x rộng x cao /6000 với chuyển phát nhanh hoặc dài x rộng x cao/3000 với chuyển phát tiết kiệm</strong>).<br/>- Nếu khối lượng nào lớn hơn thì Shipchung sẽ sử dụng làm khối lượng tính phí.<br/>- Trong trường hợp bạn nhập khối lượng không chính xác, hãng vận chuyển có thể cập nhật lại và bạn có thể phát sinh phí vượt cân.<br/>- <strong>Lưu ý</strong>: Nếu có phát sinh phí vượt cân thì tổng số tiền thu hộ vẫn giữ nguyên như lúc duyệt đơn hàng.',
                                                            trigger: 'hover'
                                                        })
                                                        $('#boxsize-popover1').popover({
                                                            html: true,
                                                            content: 'You should be input volume dimension. it help us estimate your order shipping fee more exactly. We use dim volumetric weight & actual weight also.  According courier policy, If volumes greater than we would choose that volume. <br/>- If you type it is not correct, we will charge over weight fee later. Important: If you weight is not correct, we will update it later but we will not change the total CoD money amount that you approved before.',
                                                            trigger: 'hover'
                                                        })
                                                    })
                                                </script>
                                            </div>

                                            <div class="form-group">
                                                <label for="product_code" class="col-lg-3 col-md-4 control-label text-left">{{'OBG_MaDonHang' | translate}}<!-- Mã đơn hàng --></label>
                                                <div class="col-lg-9 col-md-8">
                                                    <input type="text" ng-model="Product.Code" class="form-control" id="product_code" placeholder="{{'OBG_MaDonHangCuaBan' | translate }}">
                                                </div>
                                            </div>
											<div class="form-group">
								                <label for="order_note" class="col-lg-3 col-md-4 control-label text-left">{{'OBG_GhiChuDonHang' | translate}}<!-- Ghi chú đơn hàng --></label>
								                <div class="col-lg-9 col-md-8">
								                    <input type="text" ng-model="Product.Description" class="form-control" id="product_note">
								                </div>
								            </div>
                                            <div class="form-group" ng-if="Config.Type == 1">
                                                <label for="product_collect" class="col-lg-3 col-md-4 control-label text-left">{{'OBG_TienThiHo' | translate}}<!-- Tiền thu hộ  --></label>
                                                <div class="col-lg-9 col-md-8 ">
                                                    <input ng-if="viewCurrency == ViewHomeCurrency" type="text" ng-model="Product.MoneyCollect" id="money_collect" formatnumber class="form-control" id="product_collect"
                                                        placeholder="{{'OBG_TienThiHo' | translate}}" required tooltip="{{'OBG_SCSeThuHoTheoSoTienBanNhap' | translate:{isShipchung : isShipchung} }}"
                                                        tooltip-trigger="focus">
                                                    <input ng-if="viewCurrency != ViewHomeCurrency" ng-change="Product.MoneyCollect=convert_currency_to_home_currency(Product.MoneyCollect_curernt_2)" type="text" ng-model="Product.MoneyCollect_curernt_2" id="money_collect"  class="form-control" id="product_collect"
                                                        placeholder="{{'OBG_TienThiHo' | translate}}" required tooltip="{{'OBG_SCSeThuHoTheoSoTienBanNhap' | translate:{isShipchung : isShipchung} }}"
                                                        tooltip-trigger="focus">    
                                                </div>
                                            </div>





                                        </div>
                                    </div>
                                </div>
                            </div>

                            <style>
                                .waiting {
                                    background: rgb(248, 248, 248)
                                }
                                
                                .waiting .loading {
                                    position: absolute;
                                    left: 43%;
                                    top: 43%;
                                    z-index: 10000;
                                }
                                
                                .waiting .backdrop {
                                    position: absolute;
                                    left: 0;
                                    top: 0;
                                    left: 0;
                                    bottom: 0;
                                    z-index: 100;
                                }
                                
                                #inventory_info .ui-select-choices-content {
                                    width: 490px;
                                }
                                
                                tags-input .tags {
                                    box-shadow: none;
                                    border: 1px solid #cfdadd;
                                    -moz-appearance: initial;
                                    -webkit-appearance: initial;
                                }
                                
                                #buyer-info .ui-select-choices-row {
                                    padding: 4px!important;
                                }
                                
                                #service_box .ui-select-choices-row {
                                    padding: 4px!important;
                                }
                                
                                .product-info .popover {
                                    max-width: 400px!important;
                                }
                                
                                .product-info .popover-content {
                                    width: 400px!important;
                                }
                                .data_service_popup_close .popover{
                                    display: none !important;
                                }
                            </style>
                            <div class="col-md-4 col-lg-4 service_box" ng-class="{'waiting': waiting}">
                                <div class="backdrop" ng-if="waiting"></div>
                                <div class="loading" ng-if="waiting"><i class="fa fa-spinner fa-spin fa-3x fa-fw"></i></div>
                                <p class="m-t-md m-b-md"><strong><a ng-click="add_ems()">4. {{'OBG_DichVu' | translate }}</a></strong></p>
                                <div id="service">
                                    <div class="form-group" ng-if="!disabled_payment_type">
                                        <div class="col-lg-12 col-md-12">
                                            <select id="u376_input" class="form-control" ng-model="Config.Type" ng-disabled="Config.Service == 6">
                                                  <option value="2">{{'OBG_ThuHoTienHang_PVC_COD' | translate }}<!-- Thu hộ tiền hàng &amp; phí vận chuyển, phí thu hộ --></option>
                                                  <option value="1">{{'OBG_ThuHoTheoSoTienKHNhap' | translate }}<!-- Thu hộ theo số tiền quý khách nhập --></option>
                                                  <option value="3">{{'OBG_ChiThuHoTienHang' | translate }}<!-- Chỉ thu hộ tiền hàng --></option>
                                                  <option value="4">{{'OBG_ChiThuPVC_Cod' | translate }}<!-- Chỉ thu hộ phí vận chuyển &amp; phí thu hộ --></option>
                                                  <option value="5">{{'OBG_KhongThuHo' | translate }}<!-- Không thu hộ --></option>
                                                </select>
                                        </div>
                                    </div>


                                    <div class="form-group">
                                        <div class="col-lg-12 col-md-12 {{data_service_popup.css}}" >
                                            <!-- VI -->
                                            <ui-select class="order-service "  ng-model="Config.Service"  popover-placement="bottom" popover-enable="data_service_popup.isOpen" popover-template="'popover_service_teamplate.html'"  required id="service_select" ng-if="!disabled_service && keyLang !='en'">
                                                <ui-select-match placeholder="{{'OBG_ChonDichVu' | translate}}"><i class="fa {{$select.selected.icons}} " aria-hidden="true"></i>                                                    
                                                {{keyLang=='vi' ? $select.selected.name : $select.selected.name_en}} <span ng-if="calculateInfo.selected_courier">({{calculateInfo.selected_courier.leatime_str}})</span></ui-select-match>
                                                <ui-select-choices group-by="'group'" repeat="value.id as value in list_services | filter: $select.search">
                                                    <span><i class="fa {{value.icons}} " aria-hidden="true"></i> {{keyLang=='vi' ? value.name : value.name_en}}<!-- {{value.name}} --> 
                                                        <span ng-if="calculateInfo.selected_courier && value.id == $select.selected.id">({{calculateInfo.selected_courier.leatime_str}})</span>
                                                    </span>
                                                    <br>
                                                    <span style="font-size: 10px;"><i class="fa  icon-info "></i>&nbsp;<i>{{keyLang=='vi' ? value.note : value.note_en}}</i></span>
                                                </ui-select-choices>
                                            </ui-select>
                                            <!-- EN -->
                                            <ui-select class="order-service "  ng-model="Config.Service"  popover-placement="bottom" popover-enable="data_service_popup.isOpen" popover-template="'popover_service_teamplate.html'"  required id="service_select" ng-if="!disabled_service && keyLang =='en'">
                                                <ui-select-match placeholder="{{'OBG_ChonDichVu' | translate}}"><i class="fa {{$select.selected.icons}} " aria-hidden="true"></i>                                                    
                                                {{keyLang=='vi' ? $select.selected.name : $select.selected.name_en}} <span ng-if="calculateInfo.selected_courier">({{calculateInfo.selected_courier.leatime_str}})</span></ui-select-match>
                                                <ui-select-choices group-by="'group'" repeat="value.id as value in list_services | filter: $select.search">
                                                    <span><i class="fa {{value.icons}} " aria-hidden="true"></i> {{keyLang=='vi' ? value.name : value.name_en}}<!-- {{value.name}} --> 
                                                        <span ng-if="calculateInfo.selected_courier && value.id == $select.selected.id">({{calculateInfo.selected_courier.leatime_str}})</span>
                                                    </span>
                                                    <br>
                                                    <span style="font-size: 10px;"><i class="fa  icon-info "></i>&nbsp;<i>{{keyLang=='vi' ? value.note : value.note_en}}</i></span>
                                                </ui-select-choices>
                                            </ui-select>
                                            
                                            <!-- quoc te -->
                                            <ui-select ng-model="Config.Service" required id="service_select" ng-if="disabled_service">
                                                <ui-select-match placeholder="{{'OBG_ChonDichVu' | translate}}"><i class="fa fa-globe" aria-hidden="true"></i>&nbsp; {{keyLang=='vi' ? $select.selected.name : $select.selected.name_en}} <!-- {{$select.selected.name}} -->
                                                    <span ng-if="calculateInfo.selected_courier">({{calculateInfo.selected_courier.leatime_str}})</span></ui-select-match>
                                                <ui-select-choices repeat="value.id as value in list_services_global | filter: $select.search">
                                                     <span><i class="fa fa-globe " aria-hidden="true"></i>{{keyLang=='vi' ? value.name : value.name_en}} 
                                                     <span ng-if="calculateInfo.selected_courier && value.id == $select.selected.id">({{calculateInfo.selected_courier.leatime_str}})</span></span>
                                                     <br>
                                                    <span style="font-size: 10px;"><i class="fa  icon-info "></i>&nbsp;<i>{{keyLang=='vi' ? value.note : value.note_en}}</i></span>
                                                </ui-select-choices>
                                            </ui-select>
                                            
                                        </div>
                                    </div>

                                    <div class="form-group" >
                                        <div class="col-lg-12 col-md-12 hvc-select">
                                             <ui-select ng-model="calculateInfo.selected_courier" ng-disabled="disabled">
                                                <ui-select-match placeholder="{{'OBG_HangVanChuyen' | translate}}"><img ng-src="/img/logo-hvc/{{$select.selected.courier_id}}.png" alt="" width="50px"> &nbsp;  {{$select.selected.courier_name}}<span ng-if="$select.selected.fee.pvc" style="position: absolute; right: 25px;top: 9px;">
                                                <convert-currency style="color:#993333" home-currency="$select.selected.fee.pvc +  $select.selected.money_pickup"></convert-currency>
                                                <!-- ({{$select.selected.fee.pvc +  $select.selected.money_pickup}}{{viewCurrency}}) --></span>
                                                </ui-select-match>
                                                <ui-select-choices repeat="value in list_courier_detail  | filter: $select.search track by $index" >
                                                    <div ng-mouseenter="value.hide='hide';value.css='hvc_show'" ng-mouseleave="value.hide='';value.css=''">
                                                        <div class="row" style="font-size: 17px;margin-top: 6px;" >
                                                            <div class="pull-left m-r-sm">
                                                                <img ng-src="http://seller.shipchung.vn/img/logo-hvc/{{value.courier_id}}.png" ng-if="value.courier_id" alt="" width="50px">
                                                            </div>
                                                            <div class="pull-left">
                                                                <span style="color: black;">{{value.courier_name}} </span>   
                                                            </div>
                                                            <!-- HVC quoc te -->
                                                            <div class="pull-right" ng-if="value.fee.pvc"> 
                                                                <span ng-if="value.fee.pvc" style="color:#993333" >
                                                                    <convert-currency home-currency="value.fee.pvc +  value.money_pickup"></convert-currency>
                                                                </span>    
                                                            </div>
                                                            <!-- HVC quoc te -->
                                                            <div class="pull-right" ng-if="value.leatime_total && value.leatime_string"> 
                                                                <span style="color:#993333;font-size: 14px;" >
                                                                    <span >{{value.leatime_string}}
                                                                        <span ng-if="value.leatime_delivery >24">{{ 'OBG_Ngay'  | translate}} </span>
                                                                        <span ng-if="value.leatime_delivery <=24">{{  'OBG_Gio'| translate}} </span>
                                                                    </span>
                                                                </span>    
                                                            </div>
                                                        </div>
                                                        
                                                        <div class="row hvc_description" >
                                                            <span  class="{{value.hide}}" style="font-size: 10px;">
                                                                <i class="fa  icon-info "></i>&nbsp;<i>{{keyLang=='en' ? value.courier_description_en : value.courier_description | shipchungcut:true:60:'....'}}</i>
                                                            </span>
                                                            <span class="{{value.css}} hide" style="font-size: 10px;">
                                                                <i class="fa  icon-info "></i>&nbsp;   {{keyLang=='en' ? value.courier_description_en : value.courier_description}}
                                                            </span>
                                                        </div>

                                                    </div>
                                                </ui-select-choices>
                                            </ui-select>
                                        </div>
                                </div>

                                    <div class="form-group" ng-if="show_inputCouponCode == false">
                                         <div class="col-md-7"> &nbsp;{{'OBG_DoYouHaveCouponCode' | translate}}</div>
                                         <div class="col-md-5 text-right">
	                                       	<a  ng-click="show_CouponCode(true)">
	                                       		<span class="text-info">{{'OBG_ApplyCouponCode' |translate}}</span>
	                                       	</a>
                                         </div>
                                         <div class="cleafix"></div>
                                     </div>
                                     
                                    <div class="form-group" ng-if="show_inputCouponCode == true">
                                            <div class="col-lg-9 col-md-8" >
                                                <input type="text" ng-model="Config.Coupon_code" ng-delay="1800" ng-change="add_coupon_code()" class="form-control"
                                                    placeholder="{{'OBG_TypePromotionCouponCode' | translate}}" >
                                            </div>
                                            <div class="col-lg-3 col-md-4" >
                                                <a style="height: 34px !important;padding-top: 7px;color: white;" ng-click="show_CouponCode(false)" class="btn bg-orange btn-sm  pull-right ng-binding" >
                                                    {{'OBG_ApplyCouponCode_' | translate}}
                                            </a>
                                            </div>
                                    </div>

                                    <div class="form-group" ng-if="Config.Service!=3 && calculateInfo.selected_courier  &&  [1,8,11].indexOf(calculateInfo.selected_courier.courier_id) >=0">
                                        <div class="col-lg-12 col-md-12">
                                            <label class="i-switch m-t-xs m-r">
                                                  <input type="checkbox"  ng-model="Config.ToPostOffice" ng-true-value="1"  ng-false-value="2">
                                                  <i></i>
                                                </label> {{'ORDERC_ToiSeMangHangRaBuuCuc' | translate}}
                                             <a href="javascript:;"><i class="icon-question" aria-hidden="true" tooltip="{{'ORDERC_ToiSeMangHangRaBuuCuc_ChuThich' | translate }}"  tooltip-trigger="mouseenter"></i></a>

                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <div class="col-lg-12 col-md-12">
                                            <label class="i-switch m-t-xs m-r">
                                                  <input type="checkbox"  ng-model="Config.Protected" ng-true-value="1"  ng-false-value="2">
                                                  <i></i>
                                                </label> <a ng-click="giautest()">{{'OBG_MuaDichVuKHaiGia' | translate}}</a><!-- Mua dịch vụ khai giá -->
                                             <a href="javascript:;"><i class="icon-question" aria-hidden="true" tooltip="{{'OBG_NeuQuyKhachMuaDVBaoHiem' | translate }}"  tooltip-trigger="mouseenter"></i></a>

                                        </div>
                                    </div>


                                    <div class="form-group">
                                        <div class="col-lg-12 col-md-12">
                                            <label class="i-switch m-t-xs m-r">
                                                  <input type="checkbox"  ng-model="Config.Fragile"  ng-true-value="1"  ng-false-value="2">
                                                  <i></i>
                                                  
                                                </label> {{'OBG_HangDeVo' | translate }}<!-- Hàng dễ vỡ/chất lỏng -->
                                            <a href="javascript:;"><i class="icon-question" aria-hidden="true" tooltip="{{'OBG_VoiHangDeVoVuiLongDongGoi' | translate }}"  tooltip-trigger="mouseenter"></i></a>
                                        </div>
                                    </div>


                                    <div class="form-group" ng-if="!disabled_service">
                                        <div class="col-lg-12 col-md-12">
                                            <label class="i-switch m-t-xs m-r">
                                                  <input type="checkbox"  ng-model="Config.Checking"  ng-true-value="1"  ng-false-value="2">
                                                  <i></i>
                                                  
                                                </label> {{'OBG_ChoKhachXemHangKhiNhan' | translate}}<!-- Cho khách xem hàng khi nhận -->
                                             <a href="javascript:;"><i class="icon-question" aria-hidden="true" tooltip="{{'OBG_NeuBanSuDungDichVu' | translate}}"  tooltip-trigger="mouseenter"></i></a>
                                        </div>
                                    </div>
                                    
                                    
									
									

                                    <p class="m-t-md m-b-md"><strong> 5. {{'OBG_TinhPhiVaThuHo' | translate}}<!-- 5. Tính phí & tiền thu hộ --></strong></p>

                                    <div id="fee_detail">
                                        <div class="form-group" ng-if="1*fee_detail.pvc + 1 * calculateInfo.selected_courier.money_pickup > 0">
                                            <div class="col-md-6"><i class="fa fa-truck" aria-hidden="true"></i> {{'OBG_PhiVanChuyen' | translate}}<!-- Phí vận chuyển --></div>
                                            <div class="col-md-6 text-right">
                                            <span ng-if="viewCurrency == ViewHomeCurrency" style="color:#993333">
                                            	{{(1*fee_detail.pvc + 1 * (Config.ToPostOffice == 2 ? calculateInfo.selected_courier.money_pickup : 0) ) || '0' |vnNumber}} {{viewCurrency}}
                                            </span>
                                            <span ng-if="viewCurrency != ViewHomeCurrency" style="color:#993333">
					                           {{convert_currency(1*fee_detail.pvc + 1 * (Config.ToPostOffice == 2 ? calculateInfo.selected_courier.money_pickup : 0)) || '' | usdNumber  | number:2 }}{{viewCurrency}}
					                        </span>
                                            	</div>
                                            <div class="cleafix"></div>
                                        </div>


                                        <div class="form-group" ng-if="fee_detail.vas.cod > 0">
                                            <div class="col-md-6"><i class="fa fa-usd" aria-hidden="true"></i> &nbsp;{{'OBG_PhiThuHo' | translate}}<!-- Phí thu hộ --></div>
                                            <div class="col-md-6 text-right">
                                            <span ng-if="viewCurrency == ViewHomeCurrency" style="color:#993333">
                                            	{{fee_detail.vas.cod || '0' |vnNumber}} {{viewCurrency}}
                                            </span>
                                            <span ng-if="viewCurrency != ViewHomeCurrency">
					                           {{convert_currency(fee_detail.vas.cod) || '' | usdNumber  | number:2 }} {{viewCurrency}}
					                        </span>
                                            </div>
                                            <div class="cleafix"></div>
                                        </div>

                                        <div class="form-group" ng-if="fee_detail.vas.protected > 0">
                                            <div class="col-md-6"><i class="fa fa-get-pocket" aria-hidden="true"></i> {{'OBG_PhiBaoHiem' | translate}}<!-- Phí Bảo Hiểm --></div>
                                            <div class="col-md-6 text-right">
                                            	<!-- <span style="color:#993333">{{fee_detail.vas.protected || '0' |vnNumber}}</span>đ -->
                                            	<convert-currency style="color:#993333" home-currency="fee_detail.vas.protected"></convert-currency>
                                            </div>
                                            <div class="cleafix"></div>
                                        </div>
                                        <div class="form-group" ng-if="fee_detail.vas.pdk > 0">
                                            <div class="col-md-8"><i class="fa fa-get-pocket" aria-hidden="true"></i> Phí đồng kiểm (đã được cộng vào phí vận chuyển)</div>
                                            <div class="col-md-4 text-right">
                                            	<convert-currency style="color:#993333" home-currency="fee_detail.vas.pdk"></convert-currency>
                                            </div>
                                            <div class="cleafix"></div>
                                        </div> 

                                        <div class="form-group" ng-if="fee_detail.discount.pvc > 0 || fee_detail.discount.cod > 0">
                                            <div class="col-md-6"><i class="fa fa-gift" aria-hidden="true"></i> {{'OBG_KhuyenMai' | translate}}<!-- Khuyến mãi --> </div>
                                            <div class="col-md-6 text-right">
                                            	<span ng-if="viewCurrency == ViewHomeCurrency" style="color:#993333">
                                            		-{{(1*fee_detail.discount.pvc + 1*fee_detail.discount.pcod)  || '0' |vnNumber}}{{viewCurrency}}
                                            	</span>
                                            	 <span ng-if="viewCurrency != ViewHomeCurrency" style="color:#993333">
						                           -{{convert_currency(1*fee_detail.discount.pvc + 1*fee_detail.discount.pcod) || '' | usdNumber  | number:2 }}{{viewCurrency}}
						                        </span>
                                           	</div>
                                            <div class="cleafix"></div>
                                        </div>
                                        
                                        <div class="form-group" ng-if="calculateInfo.selected_courier.leatime_str">
                                            <div class="col-md-8"><i class="glyphicon glyphicon-time" aria-hidden="true"></i> 
                                                {{'OBG_Thoigiangiaohang' | translate}}:
                                            </div>
                                            <div class="col-md-4 text-right">
                                                <span style="color:#993333">
                                                        {{calculateInfo.selected_courier.leatime_str}}
                                                </span>
                                            <div class="cleafix"></div>
                                            </div>
                                        </div>
									

                                        <div class="form-group" ng-if="!NewOrder.TrackingCode">
                                            <div class="col-md-12"><!-- ng-disabled="createWaiting || waiting || !From.Inventory.id  || frmOrderCreate_{{$index}}.$invalid" -->
                                                <button ng-disabled="createWaiting" class="btn btn-success btn-block btn-lg"
                                                    type="button" ng-click="CreateOrder(true)">{{'OBG_DuyetDonHangNgay' | translate}}
                                                    <span>({{'OBG_ThuHo' | translate}}<!-- Thu hộ  -->: 
                                                        <span ng-if="viewCurrency != ViewHomeCurrency">
                                                            {{convert_currency(get_number(fee_detail.collect)) || '' | usdNumber  | number:2 }}{{viewCurrency}})
                                                        </span>
                                                        <span ng-if="viewCurrency == ViewHomeCurrency">
                                                            {{get_number(fee_detail.collect) || '0' | vnNumber}}{{ViewHomeCurrency || 'đ'}})
                                                        </span>
                                                    </span> 
                                                </button>
                                            </div>

                                            <div class="col-md-12">
                                                <br/>
                                                <p class="text-center"><a ng-hide="createWaiting"
                                                        ng-click="CreateOrder(false)"><span class="text-info">{{'OBG_LuuLaiVaDuyetSau' |translate}}<!-- Lưu lại dơn hàng và duyệt sau --></span></a></p>
                                            </div>
                                        </div>
                                        <div class="form-group" ng-if="NewOrder.TrackingCode">
                                            <div class="col-md-12">
                                                <button ng-disabled="true" class="btn btn-success btn-block btn-lg">{{NewOrder.status == 20 ? 'OBG_DonHangDaTao' : 'OBG_DonHangDaDuyet' | translate}}<!-- Đơn hàng đã được {{NewOrder.status == 20 ? 'tạo' : 'duyệt'}} --></button>
                                            </div>

                                        </div>

                                        <div class="form-group" ng-if="To.Buyer.Country.id != 237">
                                            <div class="col-md-12">
                                                <div class="alert alert-warning">
                                                    <p><strong>Lưu ý</strong>: </p>
                                                    <ol>
                                                        <li>Người nhận sẽ thanh toán thuế và chi phí phát sinh thêm trong quá trình vận chuyển, nhập khẩu.</li>
                                                        <li>Đơn hàng thay đổi trọng lượng sẽ được giữ lại chờ người bán thanh toán thêm.</li>
                                                    </ol>
                                                </div>
                                            </div>
                                        </div>

                                    </div>


                                </div>
                            </div>
                        </div>
                        <script type="text/ng-template" id="show_dropoff.html">
                            <div data-ng-include=" 'tpl/create/popup/popup_dropoff.html' "></div>
                        </script> 
                        <script type="text/ng-template" id="create_suscess.html">
                            <div data-ng-include=" 'tpl/create/popup/popup_suscess.html' "></div>
                        </script> 
                        <script type="text/ng-template" id="popover_service_teamplate.html">
                             <div data-ng-include=" 'tpl/create/popup/popover_service.html' "></div>
                        </script>
                    </form>

                </tab>
                <tab heading="+ {{'OBG_Them' | translate}}" ng-click="addTabs()" disabled="true" class='thembtn'></tab>
                <!--<a ui-sref="order.create" class="btn bg-success btn-sm " style="vertical-align: middle;
                    float: right;"><span style="font-weight: bolder;font-size: 15px;">Import Shopify order
                </span></a>-->
                <div >
                       
                </div>    
                
            </tabset>
        </div>
    </div>
   

</div>

<style>
    .intl-tel-input .selected-flag{
        top:15px
    }
</style>